var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},s=e.parcelRequiref9fd;null==s&&((s=function(e){if(e in t)return t[e].exports;if(e in n){var s=n[e];delete n[e];var i={id:e,exports:{}};return t[e]=i,s.call(i.exports,i,i.exports),i.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){n[e]=t},e.parcelRequiref9fd=s),(()=>{const e=document.querySelector(".js-menu-container"),t=document.querySelector(".js-open-menu"),n=document.querySelector(".js-close-menu"),s=()=>{const n="true"===t.getAttribute("aria-expanded")||!1;t.setAttribute("aria-expanded",!n),e.classList.toggle("is-open");bodyScrollLock[n?"enableBodyScroll":"disableBodyScroll"](document.body)};t.addEventListener("click",s),n.addEventListener("click",s),window.matchMedia("(min-width: 768px)").addEventListener("change",(n=>{n.matches&&(e.classList.remove("is-open"),t.setAttribute("aria-expanded",!1),bodyScrollLock.enableBodyScroll(document.body))}))})();const i=window.document,o=i.querySelectorAll("a"),l=o.length,a=i.URL;for(let e=0;e<l;e++){let t=o[e].href;a.startsWith(t)&&o[e].classList.add("active")}const c={switchIcon:document.getElementById("switch-icon"),body:document.querySelector("body"),iconDay:document.querySelector(".icon-day"),iconNight:document.querySelector(".icon-night"),headerLogoText:document.querySelector(".header-logo-text"),homeLink:document.getElementById("home-day"),catalogLink:document.getElementById("catalog-day"),myLiberyLink:document.getElementById("my-libery-day"),menuLink:document.getElementById("menu-link"),weeklyTrend:document.getElementById("weekly-trend")};c.switchIcon.addEventListener("click",(function(){c.body.classList.toggle("bkg-white"),c.switchIcon.classList.toggle("icon-day"),c.switchIcon.classList.toggle("icon-night"),c.weeklyTrend.classList.toggle("weekly-trend-day"),c.catalogLink.classList.toggle("menu-link-day"),c.homeLink.classList.toggle("menu-link-day"),c.myLiberyLink.classList.toggle("menu-link-day"),c.menuLink.classList.toggle("menu-link-day"),c.headerLogoText.classList.toggle("day-logo-text");const e=c.body.classList.contains("bkg-white");d("background",e)})),window.addEventListener("DOMContentLoaded",(function(){r("background")?(c.weeklyTrend.classList.add("weekly-trend-day"),c.catalogLink.classList.add("menu-link-day"),c.homeLink.classList.add("menu-link-day"),c.myLiberyLink.classList.add("menu-link-day"),c.menuLink.classList.add("menu-link-day"),c.body.classList.add("bkg-white"),c.headerLogoText.classList.add("day-logo-text"),c.switchIcon.classList.add("icon-day"),c.switchIcon.classList.remove("icon-night")):(c.weeklyTrend.classList.remove("weekly-trend-day"),c.catalogLink.classList.remove("menu-link-day"),c.homeLink.classList.remove("menu-link-day"),c.myLiberyLink.classList.remove("menu-link-day"),c.menuLink.classList.remove("menu-link-day"),c.switchIcon.classList.remove("icon-day"),c.switchIcon.classList.add("icon-night"),c.headerLogoText.classList.remove("day-logo-text"))}));const d=(e,t)=>{try{const n=JSON.stringify(t);localStorage.setItem(e,n)}catch(e){console.error("Set state error: ",e.message)}},r=e=>{try{const t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error("Get state error: ",e.message)}},m=document.querySelector(".js-list");let u=1;new IntersectionObserver((function(e,t){e.forEach((e=>{e.isIntersecting&&(u+=1,serviceMovie(u).then((e=>{m.insertAdjacentHTML("beforeend",y(e.results)),e.total_pages<=e.page&&t.unobserve(guard)})))}))}),{root:null,rootMargin:"400px",threshold:0});function y(e){return e.slice(0,3).map((({original_title:e,poster_path:t,release_date:n,genre:s})=>`<li class='cards-list-item'>\n       <img class='cards__list-img' src="https://image.tmdb.org/t/p/w400${t}" alt="${e}">\n       <div class='weekly-trends__overlay'></div>\n       <div class='cards__bloc-stars'>\n     <h2 class='cards__list-title'>${e}</h2>\n     <div class='cards__list-text'>${s} | ${n.slice(0,4)}</div> \n</div></li>`)).join("")}(async function(e=1){return fetch(`https://api.themoviedb.org/3/trending/movie/week?api_key=b90b64a7e05f9e36894001e36eb3b3c7&page=${e}`).then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()}))})().then((e=>{m.insertAdjacentHTML("beforeend",y(e.results))})).catch((e=>console.log(e)));var g=s("9fyS7"),L=s("pbv47");const f={backdrop:document.querySelector(".backdrop"),openModal:document.querySelector(".modal-films"),cardList:document.querySelector(".modal-films"),libraryList:document.querySelector(".library-list"),modalCont:document.querySelector(".modal__container"),filmBtn:document.querySelector(".film__button"),closeModal:document.querySelector(".modal__close-btn"),cardsfilm:document.querySelector(".cards-film")};let v,p,b="",_=[],h="";function k(e){const t=e.target.closest("li");p=Number(t.getAttribute("data-id")),f.closeModal.addEventListener("click",E),async function(e){const t=(0,L.getSecondMovieById)(e);_=[],f.cardsfilm.innerHTML="",t.then((e=>{e.genres.forEach((e=>{_.push(` ${e.name}`)})),h=function(e){if(e){const{original_title:t,id:n,vote_average:s,poster_path:i,overview:o,popularity:l,vote_count:a}=e;return i&&(b=`${g.IMG_BASE_URL}${g.IMG_W400}${i}`),`<div class='film-wrap' data-id='${n}'>\n          <ul class='film-list'>\n          <li class='film-list__img'>\n            <img\n              src='${b}'\n              alt='${t}'\n              loading='lazy'\n            />\n            </li>\n            <li class='film-list__info'>            \n                <h2 class='film-list__title'>${t}</h2>\n                <div class="film-list__wood">\n                  <div class="film-list__sub--title">\n                    <p>Vote / Votes</p>\n                    <p>Popularity</p>\n                    <p class='film-list__sub--title'>Genre</p>\n                  </div>\n                  <div  class="film-list__title--wood">\n                    <p class='film-list__text--average'><span  class='film-list__average'>${s}</span>  /  <span  class='film-list__average'>${a}</span></p>\n                    <p class='film-list__last--text'>${l}</p>\n                    <p class='film-list__last--text'>${_}</p>\n                  </div>\n                </div>\n                <div class='film-list__about'>\n                <p class='film-list__title--about'>ABOUT</p>\n                <p class='film-list__text--about'>${o}</p>\n                 </div>\n                 <div class="film__button-position">\n                 <button type="button" class="film__button">Add to my library</button>\n             </div>\n            </li>\n          </ul>\n      </div>`}}(e),f.cardsfilm.innerHTML=h,v=document.querySelector(".film__button"),v.addEventListener("click",AddFilmToLibrary)}))}(p),f.backdrop.classList.remove("is-hidden"),f.modalCont.classList.remove("is-hidden"),document.body.style.overflow="hidden",document.addEventListener("keydown",w),document.addEventListener("click",S)}function w(e){"Escape"===e.code&&E()}function S(e){e.target===f.backdrop&&E()}function E(e){f.backdrop.classList.add("is-hidden"),f.modalCont.classList.add("is-hidden"),document.body.style.overflow="scroll",document.removeEventListener("keydown",w),document.removeEventListener("click",S),f.cardList=document.querySelector(".modal-films"),f.cardList&&f.cardList.addEventListener("click",k)}f.cardList&&f.cardList.addEventListener("click",k);
//# sourceMappingURL=index.acfa08a5.js.map
