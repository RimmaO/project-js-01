!function(){function e(e){return e&&e.__esModule?e.default:e}var t,n,r,a,o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s={},i={},c=o.parcelRequiref9fd;null==c&&((c=function(e){if(e in s)return s[e].exports;if(e in i){var t=i[e];delete i[e];var n={id:e,exports:{}};return s[e]=n,t.call(n.exports,n,n.exports),n.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){i[e]=t},o.parcelRequiref9fd=c),t=document.querySelector(".js-menu-container"),n=document.querySelector(".js-open-menu"),r=document.querySelector(".js-close-menu"),a=function(){var e="true"===n.getAttribute("aria-expanded")||!1;n.setAttribute("aria-expanded",!e),t.classList.toggle("is-open"),bodyScrollLock[e?"enableBodyScroll":"disableBodyScroll"](document.body)},n.addEventListener("click",a),r.addEventListener("click",a),window.matchMedia("(min-width: 768px)").addEventListener("change",(function(e){e.matches&&(t.classList.remove("is-open"),n.setAttribute("aria-expanded",!1),bodyScrollLock.enableBodyScroll(document.body))}));for(var l=window.document,d=l.querySelectorAll("a"),u=d.length,p=l.URL,m=0;m<u;m++){var y=d[m].href;p.startsWith(y)&&d[m].classList.add("active")}var g={switchIcon:document.getElementById("switch-icon"),body:document.querySelector("body"),iconDay:document.querySelector(".icon-day"),iconNight:document.querySelector(".icon-night"),headerLogoText:document.querySelector(".header-logo-text"),homeLink:document.getElementById("home-day"),catalogLink:document.getElementById("catalog-day"),myLiberyLink:document.getElementById("my-libery-day"),menuLink:document.getElementById("menu-link"),weeklyTrend:document.getElementById("weekly-trend")};g.switchIcon.addEventListener("click",(function(){g.body.classList.toggle("bkg-white"),g.switchIcon.classList.toggle("icon-day"),g.switchIcon.classList.toggle("icon-night"),g.weeklyTrend.classList.toggle("weekly-trend-day"),g.catalogLink.classList.toggle("menu-link-day"),g.homeLink.classList.toggle("menu-link-day"),g.myLiberyLink.classList.toggle("menu-link-day"),g.menuLink.classList.toggle("menu-link-day"),g.headerLogoText.classList.toggle("day-logo-text");var e=g.body.classList.contains("bkg-white");h(f,e)})),window.addEventListener("DOMContentLoaded",(function(){v(f)?(g.weeklyTrend.classList.add("weekly-trend-day"),g.catalogLink.classList.add("menu-link-day"),g.homeLink.classList.add("menu-link-day"),g.myLiberyLink.classList.add("menu-link-day"),g.menuLink.classList.add("menu-link-day"),g.body.classList.add("bkg-white"),g.headerLogoText.classList.add("day-logo-text"),g.switchIcon.classList.add("icon-day"),g.switchIcon.classList.remove("icon-night")):(g.weeklyTrend.classList.remove("weekly-trend-day"),g.catalogLink.classList.remove("menu-link-day"),g.homeLink.classList.remove("menu-link-day"),g.myLiberyLink.classList.remove("menu-link-day"),g.menuLink.classList.remove("menu-link-day"),g.switchIcon.classList.remove("icon-day"),g.switchIcon.classList.add("icon-night"),g.headerLogoText.classList.remove("day-logo-text"))}));var f="background";var h=function(e,t){try{var n=JSON.stringify(t);localStorage.setItem(e,n)}catch(e){console.error("Set state error: ",e.message)}},v=function(e){try{var t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error("Get state error: ",e.message)}},L=c("bpxeT"),k=c("2TvXO"),b="https://api.themoviedb.org/3",w="/trending/movie/week",x="b90b64a7e05f9e36894001e36eb3b3c7",S=document.querySelector(".js-list"),_=1;new IntersectionObserver((function(e,t){e.forEach((function(e){e.isIntersecting&&serviceMovie(_+=1).then((function(e){S.insertAdjacentHTML("beforeend",T(e.results)),e.total_pages<=e.page&&t.unobserve(guard)}))}))}),{root:null,rootMargin:"400px",threshold:0});function I(){return I=e(L)(e(k).mark((function t(){var n,r=arguments;return e(k).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>0&&void 0!==r[0]?r[0]:1,e.abrupt("return",fetch("".concat(b).concat(w,"?api_key=").concat(x,"&page=").concat(n)).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()})));case 2:case"end":return e.stop()}}),t)}))),I.apply(this,arguments)}function T(e){return e.slice(0,3).map((function(e){var t=e.original_title,n=e.poster_path,r=e.release_date,a=e.genre;return"<li class='cards-list-item'>\n       <img class='cards__list-img' src=\"https://image.tmdb.org/t/p/w400".concat(n,'" alt="').concat(t,"\">\n       <div class='weekly-trends__overlay'></div>\n       <div class='cards__bloc-stars'>\n     <h2 class='cards__list-title'>").concat(t,"</h2>\n     <div class='cards__list-text'>").concat(a," | ").concat(r.slice(0,4),"</div> \n</div></li>")})).join("")}(function(){return I.apply(this,arguments)})().then((function(e){S.insertAdjacentHTML("beforeend",T(e.results))})).catch((function(e){return console.log(e)})),c("5xtVg");L=c("bpxeT"),k=c("2TvXO");var E,q=c("dIxxU"),O=c("1xRtb"),M=document.querySelector(".container"),j=document.querySelector(".library-button");function A(){return(A=e(L)(e(k).mark((function t(){var n,r,a,o;return e(k).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.default.get("https://api.themoviedb.org/3/movie/upcoming?language=en-US",{params:{api_key:O.KEY}});case 2:return n=e.sent,r=n.data,a=Math.floor(Math.random()*r.results.length),o=r.results[a],e.abrupt("return",o);case 7:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function B(e){return N.apply(this,arguments)}function N(){return(N=e(L)(e(k).mark((function t(n){var r,a,o,s,i,c,l,d,u;return e(k).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.default.get("https://api.themoviedb.org/3/genre/movie/list?language=en",{params:{api_key:O.KEY}});case 2:for(r=e.sent,a=[],o=r.data.genres,s=!0,i=!1,c=void 0,e.prev=6,l=o[Symbol.iterator]();!(s=(d=l.next()).done);s=!0)u=d.value,n.genre_ids.includes(u.id)&&a.push(u.name);e.next=14;break;case 10:e.prev=10,e.t0=e.catch(6),i=!0,c=e.t0;case 14:e.prev=14,e.prev=15,s||null==l.return||l.return();case 17:if(e.prev=17,!i){e.next=20;break}throw c;case 20:return e.finish(17);case 21:return e.finish(14);case 22:return e.abrupt("return",a);case 23:case"end":return e.stop()}}),t,null,[[6,10,14,22],[15,,17,21]])})))).apply(this,arguments)}function C(){return(C=e(L)(e(k).mark((function t(n){var r,a,o,s,i,c;return e(k).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(n).then((function(e){return e}));case 2:r=e.sent,a=r.map((function(e,t){return 0===t?e.charAt(0).toUpperCase()+e.slice(1):e.toLowerCase()})).join(", "),o=n.release_date.split("-"),s="".concat(o[2],".").concat(o[1],".").concat(o[0]),i="https://image.tmdb.org/t/p/w500/".concat(n.poster_path),c='<img src="'.concat(i,'" alt="').concat(n.title,'" />\n        <h3 class="month-movie-title">').concat(n.title,'</h3>\n        <p class="info-key">\n          Release date <span class="info-value">').concat(s,'</span>\n        </p>\n        <p class="info-key">\n          Vote / Votes <span class="info-value">').concat(n.vote_average,"</span> / <span>").concat(n.vote_count,'</span>\n        </p>\n        <p class="info-key">Popularity <span class="info-value">').concat(n.popularity.toFixed(1),'</span></p>\n        <p class="info-key">\n          Genre <span class="info-value">').concat(a,'</span>\n        </p>\n        <h4 class="about-title">About</h4>\n        <p class="about-description">\n          ').concat(n.overview,"\n        </p>\n        "),M.insertAdjacentHTML("afterbegin",c);case 9:case"end":return e.stop()}}),t)})))).apply(this,arguments)}j.addEventListener("click",(function(){var e=JSON.parse(localStorage.getItem("librariesKey"))||[],t=E.id;if(function(e){return(JSON.parse(localStorage.getItem("librariesKey"))||[]).some((function(t){return t.id===e}))}(t)){var n=e.findIndex((function(e){return e.id===t}));e.splice(n,1),localStorage.setItem("librariesKey",JSON.stringify(e)),j.textContent="Add to my library"}else e.push(E),localStorage.setItem("movie-info",JSON.stringify(e)),j.textContent="Remove from my library"})),function(){return A.apply(this,arguments)}().then((function(e){E=e,function(e){C.apply(this,arguments)}(e)})).catch((function(){if(!movie)return e='<div class="error-message"><p>Oops...</p><p>We are very sorry!</p><p>There are no upcoming movies at the moment.</p></div> ',void M.insertAdjacentHTML("afterbegin",e);var e;!function(){var e='<div class="error-message"><p>Oops...</p><p>We are very sorry!</p><p>Something went wrong.</p></div>';M.insertAdjacentHTML("afterbegin",e)}()}));var J=document.querySelector(".footer__link"),R=document.querySelector("[data-modal-close]"),U=document.querySelector(".footer__backdrop");J.addEventListener("click",(function(){U.classList.remove("is-hidden"),J.style.cursor="not-allowed"})),R.addEventListener("click",(function(){U.classList.add("is-hidden"),J.style.cursor="pointer"}))}();
//# sourceMappingURL=index.c5356a8a.js.map
