{"mappings":"iEAEQA,EACAC,EACAC,EACAC,E,geAHAH,EAAaI,SAASC,cAAc,sBACpCJ,EAAcG,SAASC,cAAc,iBACrCH,EAAeE,SAASC,cAAc,kBACtCF,EAAa,WACjB,IAAMG,EAC0C,SAA9CL,EAAYM,aAAa,mBAA+B,EAC1DN,EAAYO,aAAa,iBAAkBF,GAC3CN,EAAWS,UAAUC,OAAO,WAI5BC,eAH0BL,EAEtB,mBADA,qBAE6BF,SAASQ,K,EAE5CX,EAAYY,iBAAiB,QAASV,GACtCD,EAAaW,iBAAiB,QAASV,GAKvCW,OAAOC,WAAW,sBAAsBF,iBAAiB,UAAU,SAAAG,GAC5DA,EAAEC,UACPjB,EAAWS,UAAUS,OAAO,WAC5BjB,EAAYO,aAAa,iBAAiB,GAC1CG,eAAeQ,iBAAiBf,SAASQ,M,IAU7C,IALA,IAAMQ,EAAMN,OAAOV,SACbiB,EAAQD,EAAIE,iBAAiB,KAC7BC,EAAaF,EAAMG,OACnBC,EAAaL,EAAIM,IAEdC,EAAI,EAAGA,EAAIJ,EAAYI,IAAK,CACnC,IAAIC,EAAUP,EAAMM,GAAGE,KAEnBJ,EAAWK,WAAWF,IACxBP,EAAMM,GAAGlB,UAAUsB,IAAI,S,YCtC3B,IAAAC,EAAAC,EAAA,S,aAAMC,EAAW,+BACXC,EAAW,uBACXC,EAAU,mCAKVC,EAAOjC,SAASC,cAAc,YAChCiC,EAAO,EAOI,IAAIC,sBAEnB,SAA2BC,EAASC,GAEhCD,EAAQE,SAAQ,SAACC,GACTA,EAAMC,gBAENC,aADAP,GAAQ,GAEHQ,MAAK,SAAAC,GACFV,EAAKW,mBAAmB,YAAaC,EAAaF,EAAKG,UACnDH,EAAKI,aAAeJ,EAAKK,MACzBX,EAASY,UAAUC,M,SAjB7B,CACVC,KAAM,KACNC,WAAY,QACZC,UAAW,I,SA0BAC,I,OAAAA,EAAfC,EAAA3B,EAAA,CAAA2B,EAAAC,GAAAC,MAAA,SAAAC,I,IAA2BC,EAAIC,EAAAC,U,yEAAJF,EAAAC,EAAAxC,OAAA,YAAAwC,EAAA,GAAQA,EAAA,GAAD,E,kBAEvBE,MAAM,GAAcC,OAAXjC,GAA+BiC,OAApBhC,EAAS,aAA2BgC,OAAhB/B,EAAQ,UAAa+B,OAALJ,IAC1DjB,MAAK,SAAAsB,GACF,IAAKA,EAAKC,GACN,MAAM,IAAIC,MAAMF,EAAKG,YAGzB,OAAOH,EAAKI,M,gDARTd,EAAWe,MAAAC,KAAAT,U,CAmB1B,SAAShB,EAAa0B,GAClB,OAAOA,EAAIC,MAAM,EAAG,GAAGC,KAAI,SAAAC,G,IAAGC,EAAcD,EAAdC,eAAgBC,EAAWF,EAAXE,YAAaC,EAAYH,EAAZG,aAAcC,EAAKJ,EAALI,M,MAAW,0GACOf,OAArBa,EAAY,WAGjDb,OAH0DY,EAAe,uIAIzEZ,OADAY,EAAe,8CACJZ,OAAXe,EAAM,OAA8Bf,OAAzBc,EAAaL,MAAM,EAAG,GAAG,uB,IAC3DO,KAAK,G,oBA1BJzB,EAAWe,MAAAC,KAAAT,U,EAY1BmB,GACKtC,MAAK,SAAAC,GACFV,EAAKW,mBAAmB,YAAaC,EAAaF,EAAKG,S,IAE1DmC,OAAM,SAAAC,G,OAAOC,QAAQC,IAAIF,E","sources":["src/js/header.js","src/js/weekly-trend.js"],"sourcesContent":["// for mobile menu\n(() => {\n  const mobileMenu = document.querySelector('.js-menu-container');\n  const openMenuBtn = document.querySelector('.js-open-menu');\n  const closeMenuBtn = document.querySelector('.js-close-menu');\n  const toggleMenu = () => {\n    const isMenuOpen =\n      openMenuBtn.getAttribute('aria-expanded') === 'true' || false;\n    openMenuBtn.setAttribute('aria-expanded', !isMenuOpen);\n    mobileMenu.classList.toggle('is-open');\n    const scrollLockMethod = !isMenuOpen\n      ? 'disableBodyScroll'\n      : 'enableBodyScroll';\n    bodyScrollLock[scrollLockMethod](document.body);\n  };\n  openMenuBtn.addEventListener('click', toggleMenu);\n  closeMenuBtn.addEventListener('click', toggleMenu);\n\n  // Закрываем мобильное меню на более широких экранах\n  // в случае изменения ориентации устройства.\n\n  window.matchMedia('(min-width: 768px)').addEventListener('change', e => {\n    if (!e.matches) return;\n    mobileMenu.classList.remove('is-open');\n    openMenuBtn.setAttribute('aria-expanded', false);\n    bodyScrollLock.enableBodyScroll(document.body);\n  });\n})();\n\n// for active page\nconst doc = window.document;\nconst links = doc.querySelectorAll('a');\nconst linksCount = links.length;\nconst currentURL = doc.URL;\n\nfor (let i = 0; i < linksCount; i++) {\n  let linkURL = links[i].href;\n\n  if (currentURL.startsWith(linkURL)) {\n    links[i].classList.add('active');\n  }\n}\n","\nconst BASE_URL = \"https://api.themoviedb.org/3\";\nconst ENDPOINT = \"/trending/movie/week\";\nconst API_KEY = \"b90b64a7e05f9e36894001e36eb3b3c7\";\n// const IMG_W400 = `/w400`;\nconst IMG_PATH = \"https://image.tmdb.org/t/p/w300\";\n\n\nconst list = document.querySelector('.js-list');\nlet page = 1;\nlet options = {\n    root: null,\n    rootMargin: \"400px\",\n    threshold: 0,\n};\n\nlet observer = new IntersectionObserver(handlerPagination, options);\n\nfunction handlerPagination(entries, observer) {\n    // console.log(entries);\n    entries.forEach((entry) => {\n        if (entry.isIntersecting) {\n            page += 1;\n            serviceMovie(page)\n                .then(data => {\n                    list.insertAdjacentHTML('beforeend', createMarkup(data.results));\n                    if (data.total_pages <= data.page) {\n                        observer.unobserve(guard);\n                    }\n                })\n        }\n    })\n}\n\n\n\n\n\n\nasync function getTrending(page = 1) {\n\n    return fetch(`${BASE_URL}${ENDPOINT}?api_key=${API_KEY}&page=${page}`)\n        .then(resp => {\n            if (!resp.ok) {\n                throw new Error(resp.statusText);\n            }\n\n            return resp.json()\n            \n        }) \n}\ngetTrending()\n    .then(data => {\n        list.insertAdjacentHTML('beforeend', createMarkup(data.results))          \n    })\n    .catch(err => console.log(err))\n   \n    \nfunction createMarkup(arr) {\n    return arr.slice(0, 3).map(({ original_title, poster_path, release_date, genre}) => `<li class='cards-list-item'>\n       <img class='cards__list-img' src=\"https://image.tmdb.org/t/p/w400${poster_path}\" alt=\"${original_title}\">\n       <div class='weekly-trends__overlay'></div>\n       <div class='cards__bloc-stars'>\n     <h2 class='cards__list-title'>${original_title}</h2>\n     <div class='cards__list-text'>${genre} | ${release_date.slice(0, 4)}</div> \n</div></li>`).join('')\n}\n\n"],"names":["mobileMenu","openMenuBtn","closeMenuBtn","toggleMenu","document","querySelector","isMenuOpen","getAttribute","setAttribute","classList","toggle","bodyScrollLock","body","addEventListener","window","matchMedia","e","matches","remove","enableBodyScroll","$d35165bd5db5382a$var$doc","$d35165bd5db5382a$var$links","querySelectorAll","$d35165bd5db5382a$var$linksCount","length","$d35165bd5db5382a$var$currentURL","URL","$d35165bd5db5382a$var$i","$d35165bd5db5382a$var$linkURL","href","startsWith","add","$bpxeT","parcelRequire","$21ec04dc48ab3d3d$var$BASE_URL","$21ec04dc48ab3d3d$var$ENDPOINT","$21ec04dc48ab3d3d$var$API_KEY","$21ec04dc48ab3d3d$var$list","$21ec04dc48ab3d3d$var$page","IntersectionObserver","entries","observer1","forEach","entry","isIntersecting","serviceMovie","then","data","insertAdjacentHTML","$21ec04dc48ab3d3d$var$createMarkup","results","total_pages","page","unobserve","guard","root","rootMargin","threshold","$21ec04dc48ab3d3d$var$_getTrending","$parcel$interopDefault","$2TvXO","mark","_callee","page1","_args","arguments","fetch","concat","resp","ok","Error","statusText","json","apply","this","arr","slice","map","param","original_title","poster_path","release_date","genre","join","$21ec04dc48ab3d3d$var$getTrending","catch","err","console","log"],"version":3,"file":"index.fdf8b1a0.js.map"}