!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},a=t.parcelRequiref9fd;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){r[e]=t},t.parcelRequiref9fd=a),a("i8Q71"),a("gtycc"),a("gVa74");var i=a("bpxeT"),o=a("2TvXO"),s="https://api.themoviedb.org/3",c="/trending/movie/week",u="b90b64a7e05f9e36894001e36eb3b3c7",l=document.querySelector(".js-list"),p=1;new IntersectionObserver((function(e,t){e.forEach((function(e){e.isIntersecting&&serviceMovie(p+=1).then((function(e){l.insertAdjacentHTML("beforeend",h(e.results)),e.total_pages<=e.page&&t.unobserve(guard)}))}))}),{root:null,rootMargin:"400px",threshold:0});function d(){return d=e(i)(e(o).mark((function t(){var n,r=arguments;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>0&&void 0!==r[0]?r[0]:1,e.abrupt("return",fetch("".concat(s).concat(c,"?api_key=").concat(u,"&page=").concat(n)).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()})));case 2:case"end":return e.stop()}}),t)}))),d.apply(this,arguments)}function f(e){return v.apply(this,arguments)}function v(){return(v=e(i)(e(o).mark((function t(n){var r,a,i,s,c,l,p,d,f,v;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.themoviedb.org/3/genre/movie/list?language=en&api_key="+u);case 2:return r=e.sent,e.next=5,r.json();case 5:for(a=e.sent,i=[],s=a.genres,c=!0,l=!1,p=void 0,e.prev=9,d=s[Symbol.iterator]();!(c=(f=d.next()).done);c=!0)v=f.value,n.genre_ids.includes(v.id)&&i.push(v.name);e.next=17;break;case 13:e.prev=13,e.t0=e.catch(9),l=!0,p=e.t0;case 17:e.prev=17,e.prev=18,c||null==d.return||d.return();case 20:if(e.prev=20,!l){e.next=23;break}throw p;case 23:return e.finish(20);case 24:return e.finish(17);case 25:return e.abrupt("return",i.slice(0,2));case 26:case"end":return e.stop()}}),t,null,[[9,13,17,25],[18,,20,24]])})))).apply(this,arguments)}var g,h=(g=e(i)(e(o).mark((function t(n){var r,a;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.map((function(e){return f({genre_ids:e.genre_ids})})),e.next=3,Promise.all(r);case 3:return a=e.sent,e.abrupt("return",n.slice(0,3).map((function(e,t){var n=e.original_title,r=e.poster_path,i=e.vote_average,o=e.id,s=e.release_date,c=a[t];return"<li class='cards-list-item' data-id='".concat(o,"'>\n          <img class='cards__list-img' src=\"").concat("https://image.tmdb.org/t/p/w300").concat(r,'" alt="').concat(n,'" loading="lazy" \n          width="395px" \n           height="574px">\n          <div class=\'weekly-trends__overlay\'></div>\n          <div class=\'cards__bloc-stars\'>\n            <h2 class=\'cards__list-title\'>').concat(n,"</h2>\n            <div class='cards__list-text'>").concat(c.join(", ")," | ").concat(s.slice(0,4),'</div>\n          </div>\n          <div class="weekly__rating">\n            <div class="weekly__stars">').concat(m(i),"</div>\n          </div>\n        </li>")})).join(""));case 5:case"end":return e.stop()}}),t)}))),function(e){return g.apply(this,arguments)});function m(e){for(var t=Math.round(e),n="",r=0;r<5;r++)n+=r<t/2?"★":"☆";return n}(function(){return d.apply(this,arguments)})().then(function(){var t=e(i)(e(o).mark((function t(n){return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=l,e.next=3,h(n.results);case 3:e.t1=e.sent,e.t0.insertAdjacentHTML.call(e.t0,"beforeend",e.t1);case 5:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){return console.log(e)})),a("5xtVg");i=a("bpxeT"),o=a("2TvXO");var y,b,x=a("dIxxU"),w=a("1xRtb"),_=document.querySelector(".upcoming-section-title");function k(){return(k=e(i)(e(o).mark((function t(){var n,r,a,i;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.default.get("https://api.themoviedb.org/3/movie/upcoming?language=en-US",{params:{api_key:w.KEY}});case 2:return n=e.sent,r=n.data,a=Math.floor(Math.random()*r.results.length),i=r.results[a],e.abrupt("return",i);case 7:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function S(e){return T.apply(this,arguments)}function T(){return(T=e(i)(e(o).mark((function t(n){var r,a,i,s,c,u,l,p,d;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.default.get("https://api.themoviedb.org/3/genre/movie/list?language=en",{params:{api_key:w.KEY}});case 2:for(r=e.sent,a=[],i=r.data.genres,s=!0,c=!1,u=void 0,e.prev=6,l=i[Symbol.iterator]();!(s=(p=l.next()).done);s=!0)d=p.value,n.genre_ids.includes(d.id)&&a.push(d.name);e.next=14;break;case 10:e.prev=10,e.t0=e.catch(6),c=!0,u=e.t0;case 14:e.prev=14,e.prev=15,s||null==l.return||l.return();case 17:if(e.prev=17,!c){e.next=20;break}throw u;case 20:return e.finish(17);case 21:return e.finish(14);case 22:return e.abrupt("return",a);case 23:case"end":return e.stop()}}),t,null,[[6,10,14,22],[15,,17,21]])})))).apply(this,arguments)}function M(){return(M=e(i)(e(o).mark((function t(n){var r,a,i,s,c,u;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(n).then((function(e){return e}));case 2:r=e.sent,a=r.map((function(e,t){return 0===t?e.charAt(0).toUpperCase()+e.slice(1):e.toLowerCase()})).join(", "),i=n.release_date.split("-"),s="".concat(i[2],".").concat(i[1],".").concat(i[0]),c=O(n),u='<div class="upcoming-desktop-container"><img \n  class="upcoming-section-img" \n  src="'.concat(c,'" \n  alt="').concat(n.title,'" \n/> \n<div class="upcoming-desktop-flex"> \n  <h3 class="upcoming-movie-title">').concat(n.title,'</h3> \n  <div class="upcoming-flex-container"> \n    <div class="upcoming-tablet-flex"> \n      <div class="upcoming-data-flex"> \n        <p class="info-key">Release date</p> \n        <p class="info-value info-value-date">').concat(s,'</p> \n      </div> \n      <div class="upcoming-data-flex"> \n        <p class="info-key">Vote / Votes</p> \n        <p class="info-value"> \n          <span class="info-value-vote"> ').concat(n.vote_average,'</span> / \n          <span class="info-value-vote">').concat(n.vote_count,'</span> \n        </p> \n      </div> \n    </div> \n    <div class="upcoming-tablet-flex"> \n      <div class="upcoming-data-flex"> \n        <p class="info-key">Popularity</p> \n        <p class="info-value">').concat(n.popularity.toFixed(1),'</p> \n      </div> \n      <div class="upcoming-data-flex"> \n        <p class="info-key">Genre</p> \n        <p class="info-value">').concat(a,'</p> \n      </div> \n    </div> \n  </div> \n \n  <h4 class="about-title">About</h4> \n  <p class="about-description">').concat(n.overview,'</p> \n  <button class="library-button upcoming-button">Add to my library</button> \n</div></div> \n        '),_.insertAdjacentHTML("afterend",u),b=document.querySelector(".library-button"),A(n.id)&&(b.textContent="Remove from my library"),b.addEventListener("click",j);case 12:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function O(e){var t="https://image.tmdb.org/t/p/";return window.innerWidth>=768?"".concat(t,"w1280/").concat(e.backdrop_path):"".concat(t,"w500/").concat(e.poster_path)}function j(){var e=JSON.parse(localStorage.getItem("librariesKey"))||[],t=y.id;if(A(t)){var n=e.findIndex((function(e){return e.id===t}));e.splice(n,1),localStorage.setItem("librariesKey",JSON.stringify(e)),b.textContent="Add to my library"}else e.push(y),localStorage.setItem("librariesKey",JSON.stringify(e)),b.textContent="Remove from my library"}function A(e){return(JSON.parse(localStorage.getItem("librariesKey"))||[]).some((function(t){return t.id===e}))}(function(){return k.apply(this,arguments)})().then((function(e){y=e,function(e){M.apply(this,arguments)}(e)})).catch((function(){if(!y)return e='<div class="error-message"><p>Oops...</p><p>We are very sorry!</p><p>There are no upcoming movies at the moment.</p></div> ',void _.insertAdjacentHTML("afterend",e);var e;!function(){var e='<div class="error-message"><p>Oops...</p><p>We are very sorry!</p><p>Something went wrong.</p></div>';_.insertAdjacentHTML("afterend",e)}()})),a("7hKzD")}();
//# sourceMappingURL=index.fe04d230.js.map
