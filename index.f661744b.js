!function(){function e(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},r={},a=n.parcelRequiref9fd;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in r){var n=r[e];delete r[e];var a={id:e,exports:{}};return t[e]=a,n.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,n){r[e]=n},n.parcelRequiref9fd=a),a("i8Q71"),a("gtycc"),a("gVa74");var o=a("bpxeT"),i=a("2TvXO"),s=document.querySelector(".js-list"),c=1;new IntersectionObserver((function(e,n){e.forEach((function(e){e.isIntersecting&&serviceMovie(c+=1).then((function(e){s.insertAdjacentHTML("beforeend",createMarkup(e.results)),e.total_pages<=e.page&&n.unobserve(guard)}))}))}),{root:null,rootMargin:"400px",threshold:0});a("5xtVg");o=a("bpxeT"),i=a("2TvXO");var u,l,p=a("dIxxU"),d=a("1xRtb"),f=document.querySelector(".upcoming-section-title");function v(){return(v=e(o)(e(i).mark((function n(){var t,r,a,o;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.default.get("https://api.themoviedb.org/3/movie/upcoming?language=en-US",{params:{api_key:d.KEY}});case 2:return t=e.sent,r=t.data,a=Math.floor(Math.random()*r.results.length),o=r.results[a],e.abrupt("return",o);case 7:case"end":return e.stop()}}),n)})))).apply(this,arguments)}function g(e){return m.apply(this,arguments)}function m(){return(m=e(o)(e(i).mark((function n(t){var r,a,o,s,c,u,l,f,v;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.default.get("https://api.themoviedb.org/3/genre/movie/list?language=en",{params:{api_key:d.KEY}});case 2:for(r=e.sent,a=[],o=r.data.genres,s=!0,c=!1,u=void 0,e.prev=6,l=o[Symbol.iterator]();!(s=(f=l.next()).done);s=!0)v=f.value,t.genre_ids.includes(v.id)&&a.push(v.name);e.next=14;break;case 10:e.prev=10,e.t0=e.catch(6),c=!0,u=e.t0;case 14:e.prev=14,e.prev=15,s||null==l.return||l.return();case 17:if(e.prev=17,!c){e.next=20;break}throw u;case 20:return e.finish(17);case 21:return e.finish(14);case 22:return e.abrupt("return",a);case 23:case"end":return e.stop()}}),n,null,[[6,10,14,22],[15,,17,21]])})))).apply(this,arguments)}function h(){return(h=e(o)(e(i).mark((function n(t){var r,a,o,s,c,u;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t).then((function(e){return e}));case 2:r=e.sent,a=r.map((function(e,n){return 0===n?e.charAt(0).toUpperCase()+e.slice(1):e.toLowerCase()})).join(", "),o=t.release_date.split("-"),s="".concat(o[2],".").concat(o[1],".").concat(o[0]),c=y(t),u='<div class="upcoming-desktop-container"><img \n  class="upcoming-section-img" \n  src="'.concat(c,'" \n  alt="').concat(t.title,'" \n/> \n<div class="upcoming-desktop-flex"> \n  <h3 class="upcoming-movie-title">').concat(t.title,'</h3> \n  <div class="upcoming-flex-container"> \n    <div class="upcoming-tablet-flex"> \n      <div class="upcoming-data-flex"> \n        <p class="info-key">Release date</p> \n        <p class="info-value info-value-date">').concat(s,'</p> \n      </div> \n      <div class="upcoming-data-flex"> \n        <p class="info-key">Vote / Votes</p> \n        <p class="info-value"> \n          <span class="info-value-vote"> ').concat(t.vote_average,'</span> / \n          <span class="info-value-vote">').concat(t.vote_count,'</span> \n        </p> \n      </div> \n    </div> \n    <div class="upcoming-tablet-flex"> \n      <div class="upcoming-data-flex"> \n        <p class="info-key">Popularity</p> \n        <p class="info-value">').concat(t.popularity.toFixed(1),'</p> \n      </div> \n      <div class="upcoming-data-flex"> \n        <p class="info-key">Genre</p> \n        <p class="info-value">').concat(a,'</p> \n      </div> \n    </div> \n  </div> \n \n  <h4 class="about-title">About</h4> \n  <p class="about-description">').concat(t.overview,'</p> \n  <button class="library-button upcoming-button">Add to my library</button> \n</div></div> \n        '),f.insertAdjacentHTML("afterend",u),l=document.querySelector(".library-button"),x(t.id)&&(l.textContent="Remove from my library"),l.addEventListener("click",b);case 12:case"end":return e.stop()}}),n)})))).apply(this,arguments)}function y(e){var n="https://image.tmdb.org/t/p/";return window.innerWidth>=768?"".concat(n,"w1280/").concat(e.backdrop_path):"".concat(n,"w500/").concat(e.poster_path)}function b(){var e=JSON.parse(localStorage.getItem("librariesKey"))||[],n=u.id;if(x(n)){var t=e.findIndex((function(e){return e.id===n}));e.splice(t,1),localStorage.setItem("librariesKey",JSON.stringify(e)),l.textContent="Add to my library"}else e.push(u),localStorage.setItem("librariesKey",JSON.stringify(e)),l.textContent="Remove from my library"}function x(e){return(JSON.parse(localStorage.getItem("librariesKey"))||[]).some((function(n){return n.id===e}))}(function(){return v.apply(this,arguments)})().then((function(e){u=e,function(e){h.apply(this,arguments)}(e)})).catch((function(){if(!u)return e='<div class="error-message"><p>Oops...</p><p>We are very sorry!</p><p>There are no upcoming movies at the moment.</p></div> ',void f.insertAdjacentHTML("afterend",e);var e;!function(){var e='<div class="error-message"><p>Oops...</p><p>We are very sorry!</p><p>Something went wrong.</p></div>';f.insertAdjacentHTML("afterend",e)}()})),a("7hKzD")}();
//# sourceMappingURL=index.f661744b.js.map
