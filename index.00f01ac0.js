var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},t={},o=e.parcelRequiref9fd;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in t){var o=t[e];delete t[e];var a={id:e,exports:{}};return n[e]=a,o.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,n){t[e]=n},e.parcelRequiref9fd=o),o("bUb57"),o("rtSae"),o("eEHR3");const a=document.querySelector(".js-list");let i=1;new IntersectionObserver((function(e,n){e.forEach((e=>{e.isIntersecting&&(i+=1,serviceMovie(i).then((e=>{a.insertAdjacentHTML("beforeend",createMarkup(e.results)),e.total_pages<=e.page&&n.unobserve(guard)})))}))}),{root:null,rootMargin:"400px",threshold:0});o("bTcpz");var s=o("2shzp"),r=o("9fyS7");const l=document.querySelector(".upcoming-section-title");let c,p;function d(){const e=JSON.parse(localStorage.getItem("librariesKey"))||[],n=c.id;if(u(n)){const t=e.findIndex((e=>e.id===n));e.splice(t,1),localStorage.setItem("librariesKey",JSON.stringify(e)),p.textContent="Add to my library"}else e.push(c),localStorage.setItem("librariesKey",JSON.stringify(e)),p.textContent="Remove from my library"}function u(e){return(JSON.parse(localStorage.getItem("librariesKey"))||[]).some((n=>n.id===e))}(async function(){const e=(await s.default.get("https://api.themoviedb.org/3/movie/upcoming?language=en-US",{params:{api_key:r.KEY}})).data,n=Math.floor(Math.random()*e.results.length);return e.results[n]})().then((e=>{c=e,async function(e){const n=(await async function(e){const n=await s.default.get("https://api.themoviedb.org/3/genre/movie/list?language=en",{params:{api_key:r.KEY}});let t=[];const o=n.data.genres;for(const n of o)e.genre_ids.includes(n.id)&&t.push(n.name);return t}(e).then((e=>e))).map(((e,n)=>0===n?e.charAt(0).toUpperCase()+e.slice(1):e.toLowerCase())).join(", "),t=e.release_date.split("-"),o=`${t[2]}.${t[1]}.${t[0]}`,a=`<div class="upcoming-desktop-container"><img \n  class="upcoming-section-img" \n  src="${function(e){const n="https://image.tmdb.org/t/p/";return window.innerWidth>=768?`${n}w1280/${e.backdrop_path}`:`${n}w500/${e.poster_path}`}(e)}" \n  alt="${e.title}" \n/> \n<div class="upcoming-desktop-flex"> \n  <h3 class="upcoming-movie-title">${e.title}</h3> \n  <div class="upcoming-flex-container"> \n    <div class="upcoming-tablet-flex"> \n      <div class="upcoming-data-flex"> \n        <p class="info-key">Release date</p> \n        <p class="info-value info-value-date">${o}</p> \n      </div> \n      <div class="upcoming-data-flex"> \n        <p class="info-key">Vote / Votes</p> \n        <p class="info-value"> \n          <span class="info-value-vote"> ${e.vote_average}</span> / \n          <span class="info-value-vote">${e.vote_count}</span> \n        </p> \n      </div> \n    </div> \n    <div class="upcoming-tablet-flex"> \n      <div class="upcoming-data-flex"> \n        <p class="info-key">Popularity</p> \n        <p class="info-value">${e.popularity.toFixed(1)}</p> \n      </div> \n      <div class="upcoming-data-flex"> \n        <p class="info-key">Genre</p> \n        <p class="info-value">${n}</p> \n      </div> \n    </div> \n  </div> \n \n  <h4 class="about-title">About</h4> \n  <p class="about-description">${e.overview}</p> \n  <button class="library-button upcoming-button">Add to my library</button> \n</div></div> \n        `;l.insertAdjacentHTML("afterend",a),p=document.querySelector(".library-button"),u(e.id)&&(p.textContent="Remove from my library");p.addEventListener("click",d)}(e)})).catch((()=>{if(!c)return function(){const e='<div class="error-message"><p>Oops...</p><p>We are very sorry!</p><p>There are no upcoming movies at the moment.</p></div> ';l.insertAdjacentHTML("afterend",e)}();!function(){const e='<div class="error-message"><p>Oops...</p><p>We are very sorry!</p><p>Something went wrong.</p></div>';l.insertAdjacentHTML("afterend",e)}()})),o("epHO8");
//# sourceMappingURL=index.00f01ac0.js.map
