!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},a=t.parcelRequiref9fd;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){r[e]=t},t.parcelRequiref9fd=a),a("i8Q71"),a("gtycc"),a("gVa74");var s,c=a("bpxeT"),i=a("2TvXO"),o="https://api.themoviedb.org/3",l="/trending/movie/week",u="b90b64a7e05f9e36894001e36eb3b3c7",d="https://image.tmdb.org/t/p/w400",p=document.querySelector(".js-list"),f=1;new IntersectionObserver((function(e,t){e.forEach((function(e){e.isIntersecting&&serviceMovie(f+=1).then((function(e){p.insertAdjacentHTML("beforeend",_(e.results)),e.total_pages<=e.page&&t.unobserve(guard)}))}))}),{root:null,rootMargin:"400px",threshold:0});function v(){return v=e(c)(e(i).mark((function t(){var n,r=arguments;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>0&&void 0!==r[0]?r[0]:1,e.abrupt("return",fetch("".concat(o).concat(l,"?api_key=").concat(u,"&page=").concat(n)).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()})));case 2:case"end":return e.stop()}}),t)}))),v.apply(this,arguments)}function h(e){return g.apply(this,arguments)}function g(){return(g=e(c)(e(i).mark((function t(n){var r,a,s,c,o,l,d,p,f,v;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.themoviedb.org/3/genre/movie/list?language=en&api_key="+u);case 2:return r=e.sent,e.next=5,r.json();case 5:for(a=e.sent,s=[],c=a.genres,o=!0,l=!1,d=void 0,e.prev=9,p=c[Symbol.iterator]();!(o=(f=p.next()).done);o=!0)v=f.value,n.genre_ids.includes(v.id)&&s.push(v.name);e.next=17;break;case 13:e.prev=13,e.t0=e.catch(9),l=!0,d=e.t0;case 17:e.prev=17,e.prev=18,o||null==p.return||p.return();case 20:if(e.prev=20,!l){e.next=23;break}throw d;case 23:return e.finish(20);case 24:return e.finish(17);case 25:return e.abrupt("return",s);case 26:case"end":return e.stop()}}),t,null,[[9,13,17,25],[18,,20,24]])})))).apply(this,arguments)}function _(e){return m.apply(this,arguments)}function m(){return(m=e(c)(e(i).mark((function t(n){var r,a;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.map((function(e){return h({genre_ids:e.genre_ids})})),e.next=3,Promise.all(r);case 3:return a=e.sent,e.abrupt("return",n.slice(0,3).map((function(e,t){var n=e.original_title,r=e.poster_path,s=e.release_date,c=a[t];return"<li class='cards-list-item'> \n          <img class='cards__list-img' src=\"".concat(d).concat(r,'" alt="').concat(n,"\"> \n          <div class='weekly-trends__overlay'></div> \n          <div class='cards__bloc-stars'> \n            <h2 class='cards__list-title'>").concat(n,"</h2> \n            <div class='cards__list-text'>").concat(c.join(", ")," | ").concat(s.slice(0,4),"</div>  \n              \n          </div> \n        </li>")})).join(""));case 5:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function _(e){return e.slice(0,3).map((function(e){var t=e.original_title,n=e.poster_path,r=e.release_date,a=e.genre,s=e.id;return"<li class='cards-list-item' data-id='".concat(s,"'>\n       <img class='cards__list-img' src=\"https://image.tmdb.org/t/p/w400").concat(n,'" alt="').concat(t,"\">\n       <div class='weekly-trends__overlay'></div>\n       <div class='cards__bloc-stars'>\n     <h2 class='cards__list-title'>").concat(t,"</h2>\n     <div class='cards__list-text'>").concat(a," | ").concat(r.slice(0,4),"</div> \n</div></li>")})).join("")}(function(){return v.apply(this,arguments)})().then((s=e(c)(e(i).mark((function t(n){return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=p,e.next=3,_(n.results);case 3:e.t1=e.sent,e.t0.insertAdjacentHTML.call(e.t0,"beforeend",e.t1);case 5:case"end":return e.stop()}}),t)}))),function(e){return s.apply(this,arguments)})).catch((function(e){return console.log(e)})),a("5xtVg"),a("eYP6B"),a("7hKzD")}();
//# sourceMappingURL=index.94b49f10.js.map
