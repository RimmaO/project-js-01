!function(){function e(e){return e&&e.__esModule?e.default:e}var t,n,i,o,c="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s={},a={},l=c.parcelRequiref9fd;null==l&&((l=function(e){if(e in s)return s[e].exports;if(e in a){var t=a[e];delete a[e];var n={id:e,exports:{}};return s[e]=n,t.call(n.exports,n,n.exports),n.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){a[e]=t},c.parcelRequiref9fd=l),t=document.querySelector(".js-menu-container"),n=document.querySelector(".js-open-menu"),i=document.querySelector(".js-close-menu"),o=function(){var e="true"===n.getAttribute("aria-expanded")||!1;n.setAttribute("aria-expanded",!e),t.classList.toggle("is-open"),bodyScrollLock[e?"enableBodyScroll":"disableBodyScroll"](document.body)},n.addEventListener("click",o),i.addEventListener("click",o),window.matchMedia("(min-width: 768px)").addEventListener("change",(function(e){e.matches&&(t.classList.remove("is-open"),n.setAttribute("aria-expanded",!1),bodyScrollLock.enableBodyScroll(document.body))}));for(var r=window.document,d=r.querySelectorAll("a"),u=d.length,m=r.URL,y=0;y<u;y++){var f=d[y].href;m.startsWith(f)&&d[y].classList.add("active")}var g={switchIcon:document.getElementById("switch-icon"),body:document.querySelector("body"),iconDay:document.querySelector(".icon-day"),iconNight:document.querySelector(".icon-night"),headerLogoText:document.querySelector(".header-logo-text"),homeLink:document.getElementById("home-day"),catalogLink:document.getElementById("catalog-day"),myLiberyLink:document.getElementById("my-libery-day"),menuLink:document.getElementById("menu-link"),weeklyTrend:document.getElementById("weekly-trend")};g.switchIcon.addEventListener("click",(function(){g.body.classList.toggle("bkg-white"),g.switchIcon.classList.toggle("icon-day"),g.switchIcon.classList.toggle("icon-night"),g.weeklyTrend.classList.toggle("weekly-trend-day"),g.catalogLink.classList.toggle("menu-link-day"),g.homeLink.classList.toggle("menu-link-day"),g.myLiberyLink.classList.toggle("menu-link-day"),g.menuLink.classList.toggle("menu-link-day"),g.headerLogoText.classList.toggle("day-logo-text");var e=g.body.classList.contains("bkg-white");v(L,e)})),window.addEventListener("DOMContentLoaded",(function(){p(L)?(g.weeklyTrend.classList.add("weekly-trend-day"),g.catalogLink.classList.add("menu-link-day"),g.homeLink.classList.add("menu-link-day"),g.myLiberyLink.classList.add("menu-link-day"),g.menuLink.classList.add("menu-link-day"),g.body.classList.add("bkg-white"),g.headerLogoText.classList.add("day-logo-text"),g.switchIcon.classList.add("icon-day"),g.switchIcon.classList.remove("icon-night")):(g.weeklyTrend.classList.remove("weekly-trend-day"),g.catalogLink.classList.remove("menu-link-day"),g.homeLink.classList.remove("menu-link-day"),g.myLiberyLink.classList.remove("menu-link-day"),g.menuLink.classList.remove("menu-link-day"),g.switchIcon.classList.remove("icon-day"),g.switchIcon.classList.add("icon-night"),g.headerLogoText.classList.remove("day-logo-text"))}));var L="background";var v=function(e,t){try{var n=JSON.stringify(t);localStorage.setItem(e,n)}catch(e){console.error("Set state error: ",e.message)}},p=function(e){try{var t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error("Get state error: ",e.message)}},h=l("bpxeT"),b=l("2TvXO"),_="https://api.themoviedb.org/3",k="/trending/movie/week",w="b90b64a7e05f9e36894001e36eb3b3c7",S=document.querySelector(".js-list"),x=1;new IntersectionObserver((function(e,t){e.forEach((function(e){e.isIntersecting&&serviceMovie(x+=1).then((function(e){S.insertAdjacentHTML("beforeend",T(e.results)),e.total_pages<=e.page&&t.unobserve(guard)}))}))}),{root:null,rootMargin:"400px",threshold:0});function E(){return E=e(h)(e(b).mark((function t(){var n,i=arguments;return e(b).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>0&&void 0!==i[0]?i[0]:1,e.abrupt("return",fetch("".concat(_).concat(k,"?api_key=").concat(w,"&page=").concat(n)).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()})));case 2:case"end":return e.stop()}}),t)}))),E.apply(this,arguments)}function T(e){return e.slice(0,3).map((function(e){var t=e.original_title,n=e.poster_path,i=e.release_date,o=e.genre;return"<li class='cards-list-item'>\n       <img class='cards__list-img' src=\"https://image.tmdb.org/t/p/w400".concat(n,'" alt="').concat(t,"\">\n       <div class='weekly-trends__overlay'></div>\n       <div class='cards__bloc-stars'>\n     <h2 class='cards__list-title'>").concat(t,"</h2>\n     <div class='cards__list-text'>").concat(o," | ").concat(i.slice(0,4),"</div> \n</div></li>")})).join("")}(function(){return E.apply(this,arguments)})().then((function(e){S.insertAdjacentHTML("beforeend",T(e.results))})).catch((function(e){return console.log(e)}));h=l("bpxeT"),b=l("2TvXO");var q,I=l("1xRtb"),M=l("EKUWc"),B={backdrop:document.querySelector(".backdrop"),openModal:document.querySelector(".modal-films"),cardList:document.querySelector(".modal-films"),libraryList:document.querySelector(".library-list"),modalCont:document.querySelector(".modal__container"),filmBtn:document.querySelector(".film__button"),closeModal:document.querySelector(".modal__close-btn"),cardsfilm:document.querySelector(".cards-film")},A="",O=[],j="";function N(e){var t=e.target.closest("li");q=Number(t.getAttribute("data-id")),B.closeModal.addEventListener("click",D),function(e){U.apply(this,arguments)}(q),B.backdrop.classList.remove("is-hidden"),B.modalCont.classList.remove("is-hidden"),document.body.style.overflow="hidden",document.addEventListener("keydown",C),document.addEventListener("click",R)}function U(){return(U=e(h)(e(b).mark((function t(n){var i;return e(b).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=(0,M.getSecondMovieById)(n),O=[],B.cardsfilm.innerHTML="",i.then((function(e){e.genres.forEach((function(e){O.push(" ".concat(e.name))})),j=G(e),B.cardsfilm.innerHTML=j,document.querySelector(".film__button").addEventListener("click",AddFilmToLibrary)}));case 4:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function C(e){"Escape"===e.code&&D()}function R(e){e.target===B.backdrop&&D()}function D(e){B.backdrop.classList.add("is-hidden"),B.modalCont.classList.add("is-hidden"),document.body.style.overflow="scroll",document.removeEventListener("keydown",C),document.removeEventListener("click",R),B.cardList=document.querySelector(".modal-films"),B.cardList&&B.cardList.addEventListener("click",N)}function G(e){if(e){var t=e.original_title,n=e.id,i=e.vote_average,o=e.poster_path,c=e.overview,s=e.popularity,a=e.vote_count;return o&&(A="".concat(I.IMG_BASE_URL).concat(I.IMG_W400).concat(o)),"<div class='film-wrap' data-id='".concat(n,"'>\n          <ul class='film-list'>\n          <li class='film-list__img'>\n            <img\n              src='").concat(A,"'\n              alt='").concat(t,"'\n              loading='lazy'\n            />\n            </li>\n            <li class='film-list__info'>            \n                <h2 class='film-list__title'>").concat(t,"</h2>\n                <div class=\"film-list__wood\">\n                  <div class=\"film-list__sub--title\">\n                    <p>Vote / Votes</p>\n                    <p>Popularity</p>\n                    <p class='film-list__sub--title'>Genre</p>\n                  </div>\n                  <div  class=\"film-list__title--wood\">\n                    <p class='film-list__text--average'><span  class='film-list__average'>").concat(i,"</span>  /  <span  class='film-list__average'>").concat(a,"</span></p>\n                    <p class='film-list__last--text'>").concat(s,"</p>\n                    <p class='film-list__last--text'>").concat(O,"</p>\n                  </div>\n                </div>\n                <div class='film-list__about'>\n                <p class='film-list__title--about'>ABOUT</p>\n                <p class='film-list__text--about'>").concat(c,'</p>\n                 </div>\n                 <div class="film__button-position">\n                 <button type="button" class="film__button">Add to my library</button>\n             </div>\n            </li>\n          </ul>\n      </div>')}}B.cardList&&B.cardList.addEventListener("click",N)}();
//# sourceMappingURL=index.70c376f5.js.map
