var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},o=e.parcelRequiref9fd;null==o&&((o=function(e){if(e in t)return t[e].exports;if(e in n){var o=n[e];delete n[e];var s={id:e,exports:{}};return t[e]=s,o.call(s.exports,s,s.exports),s.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},e.parcelRequiref9fd=o),(()=>{const e=document.querySelector(".js-menu-container"),t=document.querySelector(".js-open-menu"),n=document.querySelector(".js-close-menu"),o=()=>{const n="true"===t.getAttribute("aria-expanded")||!1;t.setAttribute("aria-expanded",!n),e.classList.toggle("is-open");bodyScrollLock[n?"enableBodyScroll":"disableBodyScroll"](document.body)};t.addEventListener("click",o),n.addEventListener("click",o),window.matchMedia("(min-width: 768px)").addEventListener("change",(n=>{n.matches&&(e.classList.remove("is-open"),t.setAttribute("aria-expanded",!1),bodyScrollLock.enableBodyScroll(document.body))}))})();const s=window.document,a=s.querySelectorAll("a"),i=a.length,r=s.URL;for(let e=0;e<i;e++){let t=a[e].href;r.startsWith(t)&&a[e].classList.add("active")}const c={switchIcon:document.getElementById("switch-icon"),body:document.querySelector("body"),iconDay:document.querySelector(".icon-day"),iconNight:document.querySelector(".icon-night"),headerLogoText:document.querySelector(".header-logo-text"),homeLink:document.getElementById("home-day"),catalogLink:document.getElementById("catalog-day"),myLiberyLink:document.getElementById("my-libery-day"),menuLink:document.getElementById("menu-link"),weeklyTrend:document.getElementById("weekly-trend")};c.switchIcon.addEventListener("click",(function(){c.body.classList.toggle("bkg-white"),c.switchIcon.classList.toggle("icon-day"),c.switchIcon.classList.toggle("icon-night"),c.weeklyTrend.classList.toggle("weekly-trend-day"),c.catalogLink.classList.toggle("menu-link-day"),c.homeLink.classList.toggle("menu-link-day"),c.myLiberyLink.classList.toggle("menu-link-day"),c.menuLink.classList.toggle("menu-link-day"),c.headerLogoText.classList.toggle("day-logo-text");const e=c.body.classList.contains("bkg-white");l("background",e)})),window.addEventListener("DOMContentLoaded",(function(){d("background")?(c.weeklyTrend.classList.add("weekly-trend-day"),c.catalogLink.classList.add("menu-link-day"),c.homeLink.classList.add("menu-link-day"),c.myLiberyLink.classList.add("menu-link-day"),c.menuLink.classList.add("menu-link-day"),c.body.classList.add("bkg-white"),c.headerLogoText.classList.add("day-logo-text"),c.switchIcon.classList.add("icon-day"),c.switchIcon.classList.remove("icon-night")):(c.weeklyTrend.classList.remove("weekly-trend-day"),c.catalogLink.classList.remove("menu-link-day"),c.homeLink.classList.remove("menu-link-day"),c.myLiberyLink.classList.remove("menu-link-day"),c.menuLink.classList.remove("menu-link-day"),c.switchIcon.classList.remove("icon-day"),c.switchIcon.classList.add("icon-night"),c.headerLogoText.classList.remove("day-logo-text"))}));const l=(e,t)=>{try{const n=JSON.stringify(t);localStorage.setItem(e,n)}catch(e){console.error("Set state error: ",e.message)}},d=e=>{try{const t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error("Get state error: ",e.message)}},u=document.querySelector(".js-list");let m=1;new IntersectionObserver((function(e,t){e.forEach((e=>{e.isIntersecting&&(m+=1,serviceMovie(m).then((e=>{u.insertAdjacentHTML("beforeend",y(e.results)),e.total_pages<=e.page&&t.unobserve(guard)})))}))}),{root:null,rootMargin:"400px",threshold:0});function y(e){return e.slice(0,3).map((({original_title:e,poster_path:t,release_date:n,genre:o})=>`<li class='cards-list-item'>\n       <img class='cards__list-img' src="https://image.tmdb.org/t/p/w400${t}" alt="${e}">\n       <div class='weekly-trends__overlay'></div>\n       <div class='cards__bloc-stars'>\n     <h2 class='cards__list-title'>${e}</h2>\n     <div class='cards__list-text'>${o} | ${n.slice(0,4)}</div> \n</div></li>`)).join("")}(async function(e=1){return fetch(`https://api.themoviedb.org/3/trending/movie/week?api_key=b90b64a7e05f9e36894001e36eb3b3c7&page=${e}`).then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()}))})().then((e=>{u.insertAdjacentHTML("beforeend",y(e.results))})).catch((e=>console.log(e))),o("bTcpz");var g=o("2shzp"),p=o("9fyS7");const h=document.querySelector(".container"),L=document.querySelector(".library-button");let f;L.addEventListener("click",(function(){const e=JSON.parse(localStorage.getItem("librariesKey"))||[],t=f.id;if(function(e){return(JSON.parse(localStorage.getItem("librariesKey"))||[]).some((t=>t.id===e))}(t)){const n=e.findIndex((e=>e.id===t));e.splice(n,1),localStorage.setItem("librariesKey",JSON.stringify(e)),L.textContent="Add to my library"}else e.push(f),localStorage.setItem("movie-info",JSON.stringify(e)),L.textContent="Remove from my library"})),async function(){const e=(await g.default.get("https://api.themoviedb.org/3/movie/upcoming?language=en-US",{params:{api_key:p.KEY}})).data,t=Math.floor(Math.random()*e.results.length);return e.results[t]}().then((e=>{f=e,async function(e){const t=(await async function(e){const t=await g.default.get("https://api.themoviedb.org/3/genre/movie/list?language=en",{params:{api_key:p.KEY}});let n=[];const o=t.data.genres;for(const t of o)e.genre_ids.includes(t.id)&&n.push(t.name);return n}(e).then((e=>e))).map(((e,t)=>0===t?e.charAt(0).toUpperCase()+e.slice(1):e.toLowerCase())).join(", "),n=e.release_date.split("-"),o=`${n[2]}.${n[1]}.${n[0]}`,s=`<img src="https://image.tmdb.org/t/p/w500/${e.poster_path}" alt="${e.title}" />\n        <h3 class="month-movie-title">${e.title}</h3>\n        <p class="info-key">\n          Release date <span class="info-value">${o}</span>\n        </p>\n        <p class="info-key">\n          Vote / Votes <span class="info-value">${e.vote_average}</span> / <span>${e.vote_count}</span>\n        </p>\n        <p class="info-key">Popularity <span class="info-value">${e.popularity.toFixed(1)}</span></p>\n        <p class="info-key">\n          Genre <span class="info-value">${t}</span>\n        </p>\n        <h4 class="about-title">About</h4>\n        <p class="about-description">\n          ${e.overview}\n        </p>\n        `;h.insertAdjacentHTML("afterbegin",s)}(e)})).catch((()=>{if(!movie)return function(){const e='<div class="error-message"><p>Oops...</p><p>We are very sorry!</p><p>There are no upcoming movies at the moment.</p></div> ';h.insertAdjacentHTML("afterbegin",e)}();!function(){const e='<div class="error-message"><p>Oops...</p><p>We are very sorry!</p><p>Something went wrong.</p></div>';h.insertAdjacentHTML("afterbegin",e)}()}));const k=document.querySelector(".footer__link"),v=document.querySelector("[data-modal-close]"),b=document.querySelector(".footer__backdrop");k.addEventListener("click",(function(){b.classList.remove("is-hidden"),k.style.cursor="not-allowed"})),v.addEventListener("click",(function(){b.classList.add("is-hidden"),k.style.cursor="pointer"}));
//# sourceMappingURL=index.e615890b.js.map
