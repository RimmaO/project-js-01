{"mappings":"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","sources":["src/js/modal.js","src/js/API/api.js","node_modules/@swc/helpers/lib/_object_spread.js","node_modules/@swc/helpers/lib/_define_property.js"],"sourcesContent":["import { IMG_BASE_URL, IMG_W400 } from '../js/API/api-key';\nimport { getSecondMovieById } from '../js/API/api';\n// import {\n//   // addMovieToLibrary,\n//   // removeMovieFromLibrary,\n//   // getMovieFromLibrary,\n//   // renderLibraryData,\n// } from './library';\n\nconst refs = {\n  backdrop: document.querySelector('.backdrop'),\n  openModal: document.querySelector('.modal-films'),\n  cardList: document.querySelector('.modal-films'),\n  libraryList: document.querySelector('.library-list'),\n  modalCont: document.querySelector('.modal__container'),\n  filmBtn: document.querySelector('.film__button'),\n  closeModal: document.querySelector('.modal__close-btn'),\n  cardsfilm: document.querySelector('.cards-film'),\n};\n\nlet posterPath = '';\nlet genresList = [];\nlet filmMarkup = '';\nlet filmBtn;\nlet selectedMovieId;\n\nif (refs.cardList) {\n  refs.cardList.addEventListener('click', createModal);\n}\n\nfunction createModal(event) {\n  const selectedMovie = event.target.closest('li');\n  selectedMovieId = Number(selectedMovie.getAttribute('data-id'));\n  refs.closeModal.addEventListener('click', closeModalDescr);\n\n  createMarkup(selectedMovieId);\n\n  openModal();\n}\n\n//modal\nfunction openModal(e) {\n  refs.backdrop.classList.remove('is-hidden');\n  refs.modalCont.classList.remove('is-hidden');\n  document.body.style.overflow = 'hidden';\n  document.addEventListener('keydown', onEscBtnPress);\n  document.addEventListener('click', onBackdropClick);\n}\n\n// function onBtnClick() {\n//   const storedMovies = JSON.parse(localStorage.getItem('librariesKey')) || [];\n//   const movieId = movieData.id;\n\n//   if (isMovieStored(movieId)) {\n//     const index = storedMovies.findIndex(movie => movie.id === movieId);\n//     storedMovies.splice(index, 1);\n//     localStorage.setItem('librariesKey', JSON.stringify(storedMovies));\n\n//     addBtn.textContent = 'Add to my library';\n//   } else {\n//     storedMovies.push(movieData);\n//     localStorage.setItem('movie-info', JSON.stringify(storedMovies));\n\n//     addBtn.textContent = 'Remove from my library';\n//   }\n// }\n\n// function isMovieStored(movieId) {\n//   const storedMovies = JSON.parse(localStorage.getItem('librariesKey')) || [];\n//   return storedMovies.some(movie => movie.id === movieId);\n// }\n//  --------------------------------------------------ВАРІАНТ 2--------------------------------------------//\n// function AddFilmToLibrary() {\n//   const filmsSecId = filmBtn.dataset.id;\n//   if (getMovieFromLibrary(selectedMovieId)) {\n//     removeMovieFromLibrary(selectedMovieId);\n//     filmBtn.innerHTML = 'Add to Library';\n//   } else {\n//     addMovieToLibrary(selectedMovieId);\n//     filmBtn.innerHTML = 'Remove from Library';\n//   }\n// }\n\n// // Verefy LS\n// function changeBtnLibrary(filmsId, filmBtn) {\n//   if (getMovieFromLibrary(filmsId)) {\n//     filmBtn.innerHTML = 'Remove from Library';\n//   } else {\n//     filmBtn.innerHTML = 'Add to Library';\n//   }\n// }\n//////---------------------------------------------------------------------------------------------------------//\n// Add markup  movie\nasync function createMarkup(filmID) {\n  const film = getSecondMovieById(filmID);\n  genresList = [];\n  refs.cardsfilm.innerHTML = '';\n  film.then(data => {\n    const genres = data.genres;\n\n    genres.forEach(genre => {\n      genresList.push(` ${genre.name}`);\n    });\n    filmMarkup = createFilmMarkup(data);\n    refs.cardsfilm.innerHTML = filmMarkup;\n    // save the link to the button\n    filmBtn = document.querySelector('.film__button');\n    filmBtn.addEventListener('click', AddFilmToLibrary);\n    // changeBtnLibrary(selectedMovieId, filmBtn);\n  });\n}\n\n//  ESC modal\nfunction onEscBtnPress(e) {\n  if (e.code === 'Escape') {\n    closeModalDescr();\n  }\n}\n\n// modal back\nfunction onBackdropClick(e) {\n  if (e.target === refs.backdrop) {\n    closeModalDescr();\n  }\n}\n\n// close modal\nfunction closeModalDescr(e) {\n  refs.backdrop.classList.add('is-hidden');\n  refs.modalCont.classList.add('is-hidden');\n  document.body.style.overflow = 'scroll';\n  document.removeEventListener('keydown', onEscBtnPress);\n  document.removeEventListener('click', onBackdropClick);\n  // document.removeEventListener('click', AddFilmToLibrary);\n  // if (refs.libraryList) {\n  //   renderLibraryData();\n  refs.cardList = document.querySelector('.modal-films');\n  if (refs.cardList) refs.cardList.addEventListener('click', createModal);\n}\n// }\n\n// render mark\nfunction createFilmMarkup(data) {\n  if (data) {\n    const {\n      original_title,\n      id,\n      vote_average,\n      poster_path,\n      overview,\n      popularity,\n      vote_count,\n    } = data;\n\n    if (poster_path) {\n      posterPath = `${IMG_BASE_URL}${IMG_W400}${poster_path}`;\n    }\n\n    return `<div class='film-wrap' data-id='${id}'>\n          <ul class='film-list'>\n          <li class='film-list__img'>\n            <img\n              src='${posterPath}'\n              alt='${original_title}'\n              loading='lazy'\n            />\n            </li>\n            <li class='film-list__info'>            \n                <h2 class='film-list__title'>${original_title}</h2>\n                <div class=\"film-list__wood\">\n                  <div class=\"film-list__sub--title\">\n                    <p>Vote / Votes</p>\n                    <p>Popularity</p>\n                    <p class='film-list__sub--title'>Genre</p>\n                  </div>\n                  <div  class=\"film-list__title--wood\">\n                    <p class='film-list__text--average'><span  class='film-list__average'>${vote_average}</span>  /  <span  class='film-list__average'>${vote_count}</span></p>\n                    <p class='film-list__last--text'>${popularity}</p>\n                    <p class='film-list__last--text'>${genresList}</p>\n                  </div>\n                </div>\n                <div class='film-list__about'>\n                <p class='film-list__title--about'>ABOUT</p>\n                <p class='film-list__text--about'>${overview}</p>\n                 </div>\n                 <div class=\"film__button-position\">\n                 <button type=\"button\" class=\"film__button\">Add to my library</button>\n             </div>\n            </li>\n          </ul>\n      </div>`;\n  }\n}\n","import axios from 'axios';\nimport { KEY, BASE_URL } from './api-key';\n\nexport async function getDayTrending(page = 1) {\n  const url = `${BASE_URL}/trending/all/day?api_key=${KEY}&language=en-US&page=${page}`;\n  return await axios\n    .get(url)\n    .then(response => {\n      return response.data;\n    })\n    .catch(error => console.log(error));\n}\n\nexport async function getVideos(movie_id) {\n  const url = `${BASE_URL}/movie/${movie_id}/videos?api_key=${KEY}&language=en-US`;\n  return await axios\n    .get(url)\n    .then(response => {\n      return response.data.results;\n    })\n    .catch(error => {});\n}\n\n// Фетч фильма по его ID\nexport async function getMovieById(id) {\n  try {\n    const { data } = await axios.get(`${ID_URL}${id}?api_key=${KEY}`);\n\n    const result = {\n      ...data,\n      year: createYear(data),\n      customGenres: createGenresFromID(data),\n    };\n\n    return result;\n  } catch (error) {\n    console.error('Smth wrong with api ID fetch' + error);\n  }\n}\n\nexport const getSecondMovieById = async id => {\n  try {\n    const { data } = await axios.get(\n      `https://api.themoviedb.org/3/movie/${id}?api_key=${KEY}`\n    );\n    const result = {\n      ...data,\n    };\n    return result;\n  } catch (error) {\n    console.error('Smth wrong with api ID fetch' + error);\n  }\n};\n\nexport const getMovieById2 = async id => {\n  try {\n    const { data } = await axios.get(\n      `https://api.themoviedb.org/3/movie/${id}?api_key=${API_KEY}`\n    );\n    const result = {\n      ...data,\n    };\n    return result;\n  } catch (error) {\n    console.error('Smth wrong with api ID fetch' + error);\n  }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _objectSpread;\nvar _defineProperty = _interopRequireDefault(require(\"./_define_property\"));\nfunction _objectSpread(target) {\n    for(var i = 1; i < arguments.length; i++){\n        var source = arguments[i] != null ? arguments[i] : {};\n        var ownKeys = Object.keys(source);\n        if (typeof Object.getOwnPropertySymbols === 'function') {\n            ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym) {\n                return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n            }));\n        }\n        ownKeys.forEach(function(key) {\n            (0, _defineProperty).default(target, key, source[key]);\n        });\n    }\n    return target;\n}\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _defineProperty;\nfunction _defineProperty(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n    } else {\n        obj[key] = value;\n    }\n    return obj;\n}\n"],"names":["$40873ecf3c18e122$var$selectedMovieId","$bpxeT","parcelRequire","$40873ecf3c18e122$var$refs","backdrop","document","querySelector","openModal","cardList","libraryList","modalCont","filmBtn","closeModal","cardsfilm","$40873ecf3c18e122$var$posterPath","$40873ecf3c18e122$var$genresList","$40873ecf3c18e122$var$filmMarkup","$40873ecf3c18e122$var$createModal","event","selectedMovie","target","closest","Number","getAttribute","addEventListener","$40873ecf3c18e122$var$closeModalDescr","filmID","$40873ecf3c18e122$var$_createMarkup","apply","this","arguments","$40873ecf3c18e122$var$createMarkup","classList","remove","body","style","overflow","$40873ecf3c18e122$var$onEscBtnPress","$40873ecf3c18e122$var$onBackdropClick","$parcel$interopDefault","$2TvXO","mark","_callee","film","$EKUWc","getSecondMovieById","innerHTML","then","data","genres","forEach","genre","push","concat","name","$40873ecf3c18e122$var$createFilmMarkup","AddFilmToLibrary","e","code","add","removeEventListener","original_title","id","vote_average","poster_path","overview","popularity","vote_count","$1xRtb","IMG_BASE_URL","IMG_W400","$07a82159a214c1d4$export$bc93adfbe24dbd46","result","$dIxxU","default","get","KEY","_ctx","sent","$dDDEV","console","error","t0","$07a82159a214c1d4$export$56be286cbf0d5fea","API_KEY","Object","defineProperty","module","exports","value","i","length","source","ownKeys","keys","getOwnPropertySymbols","filter","sym","getOwnPropertyDescriptor","enumerable","key","$9eddae5a012cde57$var$_defineProperty","obj","__esModule","configurable","writable"],"version":3,"file":"library.9acbb51f.js.map"}