function e(e,t,r,o){Object.defineProperty(e,t,{get:r,set:o,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},n={},a=r.parcelRequiref9fd;null==a&&((a=function(e){if(e in o)return o[e].exports;if(e in n){var t=n[e];delete n[e];var r={id:e,exports:{}};return o[e]=r,t.call(r.exports,r,r.exports),r.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},r.parcelRequiref9fd=a),a.register("kyEFX",(function(t,r){var o,n;e(t.exports,"register",(function(){return o}),(function(e){return o=e})),e(t.exports,"resolve",(function(){return n}),(function(e){return n=e}));var a={};o=function(e){for(var t=Object.keys(e),r=0;r<t.length;r++)a[t[r]]=e[t[r]]},n=function(e){var t=a[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),a("kyEFX").register(JSON.parse('{"5ZPII":"index.412ec6b9.js","4g744":"hero-desktop-1x.1b8f9577.jpg","lCSqD":"hero-tablet-1x.c3657911.jpg","6xAHN":"hero-mobile-1x.c6fb2550.jpg","jUpL3":"pop-up.ec7cba19.jpg","7adTC":"library.8206a48c.js"}')),a("bUb57"),a("rtSae");var l;l=new URL(a("kyEFX").resolve("4g744"),import.meta.url).toString();var i;i=new URL(a("kyEFX").resolve("lCSqD"),import.meta.url).toString();var s;s=new URL(a("kyEFX").resolve("6xAHN"),import.meta.url).toString();new URL(a("kyEFX").resolve("jUpL3"),import.meta.url).toString();const d=document.getElementById("hero"),c=document.querySelector(".hero-title"),u=document.querySelector(".hero-rating"),f=document.querySelector(".hero-overview"),m=document.querySelector(".hero-details-btn"),p=document.querySelector(".hero-trailer-btn"),g=document.getElementById("detailsModal"),y=document.querySelector("#detailsModal .modal-title"),h=document.querySelector("#detailsModal .modal-overview"),v=document.querySelector("#detailsModal .modal-close-btn"),b=document.getElementById("trailerModal"),w=(document.querySelector("#trailerModal .modal-title"),document.querySelector("#trailerModal .modal-trailer")),_=document.querySelector("#trailerModal .modal-close-btn"),x=document.querySelector(".trailer-modal-content");function S(){const e=window.innerWidth;let r=t(l);e<=480?r=t(s):e<=1158&&(r=t(i)),d.style.backgroundImage=`url(${r})`,c.textContent="Let’s Make Your Own Cinema",u.textContent="",f.textContent='Is a guide to creating a personalized movie theater experience. You"ll need a projector, screen, and speakers. Decorate your space, choose your films, and stock up on snacks for the full experience.',p.textContent="Get started",p.addEventListener("click",(()=>{window.location.href="catalog.html"})),m.style.display="none"}v.addEventListener("click",(()=>{g.style.display="none"})),_.addEventListener("click",(()=>{b.style.display="none"})),async function(){try{const e=(await axios.get("https://api.themoviedb.org/3/trending/movie/day?api_key=b0c24f4300d90d0bb33ad49b06fe89dd")).data;if(e.results.length>0){const t=e.results[Math.floor(Math.random()*e.results.length)];!function(e){d.style.backgroundImage=`url(https://image.tmdb.org/t/p/original/${e.backdrop_path})`,c.textContent=e.title,f.textContent=e.overview,m.addEventListener("click",(()=>{!function(e){y.textContent=e.title,h.textContent=e.overview,g.style.display="flex"}(e)})),p.addEventListener("click",(()=>{!async function(e){w.innerHTML="";try{const t=await fetch(`https://api.themoviedb.org/3/movie/${e}/videos?api_key=b0c24f4300d90d0bb33ad49b06fe89dd&language=en-US`),r=await t.json();if(r.results.length>0){const e=r.results[0].key,t=document.createElement("iframe");t.width="100%",t.height="100%",t.src=`https://www.youtube.com/embed/${e}`,t.allowFullscreen=!0,w.appendChild(t),_.style.background="none",_.style.outline="1px solid orange",_.style.color="orange"}else w.textContent="Failed to load trailer.",x.classList.remove("trailer-modal-content")}catch(e){console.error(e),x.classList.add("modal-trailer-defolt");const t='\n      <div class="modal-trailer-defolt">\n      <div class="modal-trailer-defolt-text">\n      <p class="modal-def">OOPS...<br>We are very sorry!<br>But we couldn\'t the trailer.</p>\n      </div>';w.innerHTML=t}b.style.display="flex"}(e.id)}));!function(e){const t=Math.round(e),r=document.querySelector(".stars"),o=document.querySelector(".rating-value");let n="";for(let e=0;e<5;e++)n+=e<t/2?"★":"☆";r.textContent=n,o.textContent=`Rating: ${e.toFixed(1)}`}(e.vote_average)}(t),console.log(t)}else S()}catch(e){console.error(e),S()}}();const k=document.querySelector(".js-list");let E=1;new IntersectionObserver((function(e,t){e.forEach((e=>{e.isIntersecting&&(E+=1,serviceMovie(E).then((e=>{k.insertAdjacentHTML("beforeend",M(e.results)),e.total_pages<=e.page&&t.unobserve(guard)})))}))}),{root:null,rootMargin:"400px",threshold:0});async function M(e){const t=e.map((({genre_ids:e})=>async function(e){const t=await fetch("https://api.themoviedb.org/3/genre/movie/list?language=en&api_key=b90b64a7e05f9e36894001e36eb3b3c7");let r=[];const o=(await t.json()).genres;for(const t of o)e.genre_ids.includes(t.id)&&r.push(t.name);return r}({genre_ids:e}))),r=await Promise.all(t);e[Math.floor(Math.random()*e.length)];return e.slice(0,3).map((({original_title:e,poster_path:t,release_date:o},n)=>`<li class='cards-list-item'> \n          <img class='cards__list-img' src="https://image.tmdb.org/t/p/w300${t}" alt="${e}"> \n          <div class='weekly-trends__overlay'></div> \n          <div class='cards__bloc-stars'> \n            <h2 class='cards__list-title'>${e}</h2> \n            <div class='cards__list-text'>${r[n].join(", ")} | ${o.slice(0,4)}</div>  \n          </div> \n        </li>`)).join("")}(async function(e=1){return fetch(`https://api.themoviedb.org/3/trending/movie/week?api_key=b90b64a7e05f9e36894001e36eb3b3c7&page=${e}`).then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()}))})().then((async e=>{k.insertAdjacentHTML("beforeend",await M(e.results))})).catch((e=>console.log(e)));const q=document.querySelectorAll(".rating__item");Array.prototype.slice.call(q).forEach((e=>e.addEventListener("click",(()=>e.parentNode.dataset.totalValue=e.dataset.itemValue)))),a("bTcpz"),a("br6gq"),a("epHO8");
//# sourceMappingURL=index.412ec6b9.js.map
